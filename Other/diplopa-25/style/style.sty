\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{geometry}
\RequirePackage{graphicx}
\RequirePackage{caption}
\RequirePackage{subcaption}
\RequirePackage{float}
\RequirePackage[hidelinks]{hyperref}
\RequirePackage{listings}
\RequirePackage{color}
\RequirePackage{datetime2}
\RequirePackage{array}
\RequirePackage{tikz}
\RequirePackage{enumitem}

\RequirePackage{polyglossia}
\RequirePackage{xecyr}

\setdefaultlanguage{russian}
\setotherlanguage{english}

\setmainfont{Times New Roman} 
\newfontfamily{\cyrillicfont}{Times New Roman}
\newfontfamily{\dejavu}{DejaVu Sans Mono}

\SetLanguageKeys{russian}{indentfirst=true}

\parindent 1.25cm
\linespread{1.5}

\geometry{left=2.5cm}
\geometry{right=1.5cm}
\geometry{top=2cm}
\geometry{bottom=2cm}

\renewcommand{\lstlistingname}{Листинг}

\newcommand{\labeltext}[2]{%
  \@bsphack
  \MakeLinkTarget*{#1}%
  \def\@currentlabel{#1}{\label{#2}}%
  \@esphack%
  #1%
}

%%% Math commands and operators 
\newcommand{\D}{\partial}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}

\newtheorem{definition}{Определение}
\newtheorem{theorem}{Теорема}
\newtheorem{statement}{Утверждение}
\newtheorem{corollary}{Следствие}
\newtheorem{lemma}{Лемма}

\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\Rez}{Re}
\DeclareMathOperator{\Imz}{Im}
\DeclareMathOperator{\const}{const}

%%% Math END

\addto\captionsrussian{\def\refname{\section{Список литературы}\vspace*{-1em}}}
\addto\captionsrussian{\def\contentsname{Оглавление}}

\makeatletter
\AddEnumerateCounter{\asbuk}{\russian@alph}{щ}

\newcommand{\monthname}[1]{
	\ifcase#1
	\or
	января%
	\or
	февраля%
	\or
	марта%
	\or
	апреля%
	\or
	мая%
	\or
	июня%
	\or
	июля%
	\or
	августа%
	\or
	сентября%
	\or
	октября%
	\or
	ноября%
	\or
	декабря%
	\fi
}

\usepackage{color}
\definecolor{darkred}{rgb}{0.6,0.0,0.0}
\definecolor{darkgreen}{rgb}{0,0.50,0}
\definecolor{lightblue}{rgb}{0.0,0.42,0.91}
\definecolor{orange}{rgb}{0.99,0.48,0.13}
\definecolor{grass}{rgb}{0.18,0.80,0.18}
\definecolor{pink}{rgb}{0.97,0.15,0.45}

% listings
\usepackage{listings}

% General Setting of listings
\lstset{
  aboveskip=1em,
  breaklines=true,
  abovecaptionskip=-6pt,
  captionpos=b,
  escapeinside={\%*}{*)},
  frame=single,
  numbers=left,
  numberstyle=\tiny,
}
% 0. Basic Color Theme
\lstdefinestyle{colored}{ %
  basicstyle=\ttfamily,
  backgroundcolor=\color{white},
  commentstyle=\color{green}\itshape,
  keywordstyle=\color{blue}\bfseries\itshape,
  keywordstyle=[2]\color{blue}\bfseries,
  keywordstyle=[3]\color{orange},
  stringstyle=\color{red},
  morekeywords={self},
  morekeywords=[2]{__init__},
  morekeywords=[3]{@staticmethod},
}

\delimitershortfall=-1pt